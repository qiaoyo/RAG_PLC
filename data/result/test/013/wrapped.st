
(* =========================================================
   Generated by PLC-Eval Benchmark Wrapper
   ========================================================= *)

FUNCTION_BLOCK LLM_Wrapper_FB
VAR_INPUT
	IN : REAL;
	KP : REAL := 1.0;
	KI : REAL := 1.0;
	LIM_L : REAL := -1.0E38;
	LIM_H : REAL := 1.0E38;
	RST : BOOL := FALSE;
END_VAR

VAR_OUTPUT
	Y : REAL;
	LIM : BOOL;
END_VAR

VAR
	integ : FT_INT;
END_VAR

(*@KEY@: WORKSHEET
NAME: FT_PIW
IEC_LANGUAGE: ST
*)
(* 运行积分器 *)
integ(IN := IN, K := KI, RUN := NOT LIM, RST := RST);

(* 设置输出值 *)
Y := KP * IN + integ.Out;

(* 检查限制 *)
IF Y < LIM_L THEN
	Y := LIM_L;
	LIM := TRUE;
ELSIF Y > LIM_H THEN
	Y := LIM_H;
	LIM := TRUE;
ELSE
	LIM := FALSE;
END_IF;
END_FUNCTION_BLOCK

PROGRAM Auto_Proxy_Prg
  VAR
    instance : LLM_Wrapper_FB;
  END_VAR

  instance();
END_PROGRAM

CONFIGURATION Config0
  RESOURCE Res0 ON PLC
    TASK TaskMain(INTERVAL := T#20ms, PRIORITY := 0);
    PROGRAM Inst0 WITH TaskMain : Auto_Proxy_Prg;
  END_RESOURCE
END_CONFIGURATION
